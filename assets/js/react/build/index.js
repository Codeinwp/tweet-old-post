(()=>{"use strict";var e={251:(e,t,s)=>{var a=s(196),l=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,s){var a,o={},p=null,c=null;for(a in void 0!==s&&(p=""+s),void 0!==t.key&&(p=""+t.key),void 0!==t.ref&&(c=t.ref),t)n.call(t,a)&&!i.hasOwnProperty(a)&&(o[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===o[a]&&(o[a]=t[a]);return{$$typeof:l,type:e,key:p,ref:c,props:o,_owner:r.current}}},893:(e,t,s)=>{e.exports=s(251)},196:e=>{e.exports=window.React}},t={};function s(a){var l=t[a];if(void 0!==l)return l.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,s),n.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=s(196);const t=window.wp.components,a=window.wp.coreData,l=window.wp.data,n=window.wp.editor,r=window.wp.element,i=window.wp.plugins,o=window.wp.primitives;var p=s(893);const c=(0,p.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(o.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),u=window.wp.date,m=window.lodash,_=window.wp.url,d=({link:e,source:t,medium:s,campaign:a})=>{const l={utm_source:t,utm_medium:s,utm_campaign:a};return(0,_.addQueryArgs)(e,l)},g=t=>{const s={facebook:{className:"facebook-icon",iconClass:"fa fa-facebook"},twitter:{className:"twitter-icon",iconClass:"fa fa-twitter"},linkedin:{className:"linkedin-icon",iconClass:"fa fa-linkedin"},instagram:{className:"instagram-icon",iconClass:"fa fa-instagram"},telegram:{className:"telegram-icon",iconClass:"fa fa-telegram"},tumblr:{className:"tumblr-icon",iconClass:"fa fa-tumblr"},vk:{className:"vk-icon",iconClass:"fa fa-vk"},mastodon:{className:"mastodon-icon",iconClass:"fa fa-mastodon"},gmb:{className:"gmb-icon",iconClass:"fa fa-google"},webhook:{className:"webhook-icon",iconClass:"fa fa-link"},bluesky:{className:"bluesky-icon",iconClass:"fa fa-cloud"},whatsapp:{className:"whatsapp-icon",iconClass:"fa fa-whatsapp"},link:{className:"link-icon",iconClass:"fa fa-link"}};return(0,e.createElement)("div",{className:`revive-social-platform-icon ${s[t].className}`},!["mastodon","webhook"].includes(t)&&(0,e.createElement)("i",{className:s[t].iconClass}),"webhook"===t&&(0,e.createElement)("svg",{height:"14",width:"16",viewBox:"-10 -5 1034 1034",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},(0,e.createElement)("path",{fill:"#fff",d:"M482 226h-1l-10 2q-33 4 -64.5 18.5t-55.5 38.5q-41 37 -57 91q-9 30 -8 63t12 63q17 45 52 78l13 12l-83 135q-26 -1 -45 7q-30 13 -45 40q-7 15 -9 31t2 32q8 30 33 48q15 10 33 14.5t36 2t34.5 -12.5t27.5 -25q12 -17 14.5 -39t-5.5 -41q-1 -5 -7 -14l-3 -6l118 -192 q6 -9 8 -14l-10 -3q-9 -2 -13 -4q-23 -10 -41.5 -27.5t-28.5 -39.5q-17 -36 -9 -75q4 -23 17 -43t31 -34q37 -27 82 -27q27 -1 52.5 9.5t44.5 30.5q17 16 26.5 38.5t10.5 45.5q0 17 -6 42l70 19l8 1q14 -43 7 -86q-4 -33 -19.5 -63.5t-39.5 -53.5q-42 -42 -103 -56 q-6 -2 -18 -4l-14 -2h-37zM500 350q-17 0 -34 7t-30.5 20.5t-19.5 31.5q-8 20 -4 44q3 18 14 34t28 25q24 15 56 13q3 4 5 8l112 191q3 6 6 9q27 -26 58.5 -35.5t65 -3.5t58.5 26q32 25 43.5 61.5t0.5 73.5q-8 28 -28.5 50t-48.5 33q-31 13 -66.5 8.5t-63.5 -24.5 q-4 -3 -13 -10l-5 -6q-4 3 -11 10l-47 46q23 23 52 38.5t61 21.5l22 4h39l28 -5q64 -13 110 -60q22 -22 36.5 -50.5t19.5 -59.5q5 -36 -2 -71.5t-25 -64.5t-44 -51t-57 -35q-34 -14 -70.5 -16t-71.5 7l-17 5l-81 -137q13 -19 16 -37q5 -32 -13 -60q-16 -25 -44 -35 q-17 -6 -35 -6zM218 614q-58 13 -100 53q-47 44 -61 105l-4 24v37l2 11q2 13 4 20q7 31 24.5 59t42.5 49q50 41 115 49q38 4 76 -4.5t70 -28.5q53 -34 78 -91q7 -17 14 -45q6 -1 18 0l125 2q14 0 20 1q11 20 25 31t31.5 16t35.5 4q28 -3 50 -20q27 -21 32 -54 q2 -17 -1.5 -33t-13.5 -30q-16 -22 -41 -32q-17 -7 -35.5 -6.5t-35.5 7.5q-28 12 -43 37l-3 6q-14 0 -42 -1l-113 -1q-15 -1 -43 -1l-50 -1l3 17q8 43 -13 81q-14 27 -40 45t-57 22q-35 6 -70 -7.5t-57 -42.5q-28 -35 -27 -79q1 -37 23 -69q13 -19 32 -32t41 -19l9 -3z"})),"mastodon"===t&&(0,e.createElement)("svg",{height:"14",width:"16",viewBox:"0 0 74 79",xmlns:"http://www.w3.org/2000/svg",version:"1.1"},(0,e.createElement)("path",{fill:"#fff",d:"M73.7014 17.9592C72.5616 9.62034 65.1774 3.04876 56.424 1.77536C54.9472 1.56019 49.3517 0.7771 36.3901 0.7771H36.2933C23.3281 0.7771 20.5465 1.56019 19.0697 1.77536C10.56 3.01348 2.78877 8.91838 0.903306 17.356C-0.00357857 21.5113 -0.100361 26.1181 0.068112 30.3439C0.308275 36.404 0.354874 42.4535 0.91406 48.489C1.30064 52.498 1.97502 56.4751 2.93215 60.3905C4.72441 67.6217 11.9795 73.6395 19.0876 76.0945C26.6979 78.6548 34.8821 79.0799 42.724 77.3221C43.5866 77.1245 44.4398 76.8953 45.2833 76.6342C47.1867 76.0381 49.4199 75.3714 51.0616 74.2003C51.0841 74.1839 51.1026 74.1627 51.1156 74.1382C51.1286 74.1138 51.1359 74.0868 51.1368 74.0592V68.2108C51.1364 68.185 51.1302 68.1596 51.1185 68.1365C51.1069 68.1134 51.0902 68.0932 51.0695 68.0773C51.0489 68.0614 51.0249 68.0503 50.9994 68.0447C50.9738 68.0391 50.9473 68.0392 50.9218 68.045C45.8976 69.226 40.7491 69.818 35.5836 69.8087C26.694 69.8087 24.3031 65.6569 23.6184 63.9285C23.0681 62.4347 22.7186 60.8764 22.5789 59.2934C22.5775 59.2669 22.5825 59.2403 22.5934 59.216C22.6043 59.1916 22.621 59.1702 22.6419 59.1533C22.6629 59.1365 22.6876 59.1248 22.714 59.1191C22.7404 59.1134 22.7678 59.1139 22.794 59.1206C27.7345 60.2936 32.799 60.8856 37.8813 60.8843C39.1036 60.8843 40.3223 60.8843 41.5447 60.8526C46.6562 60.7115 52.0437 60.454 57.0728 59.4874C57.1983 59.4628 57.3237 59.4416 57.4313 59.4098C65.3638 57.9107 72.9128 53.2051 73.6799 41.2895C73.7086 40.8204 73.7803 36.3758 73.7803 35.889C73.7839 34.2347 74.3216 24.1533 73.7014 17.9592ZM61.4925 47.6918H53.1514V27.5855C53.1514 23.3526 51.3591 21.1938 47.7136 21.1938C43.7061 21.1938 41.6988 23.7476 41.6988 28.7919V39.7974H33.4078V28.7919C33.4078 23.7476 31.3969 21.1938 27.3894 21.1938C23.7654 21.1938 21.9552 23.3526 21.9516 27.5855V47.6918H13.6176V26.9752C13.6176 22.7423 14.7157 19.3795 16.9118 16.8868C19.1772 14.4 22.1488 13.1231 25.8373 13.1231C30.1064 13.1231 33.3325 14.7386 35.4832 17.9662L37.5587 21.3949L39.6377 17.9662C41.7884 14.7386 45.0145 13.1231 49.2765 13.1231C52.9614 13.1231 55.9329 14.4 58.2055 16.8868C60.4017 19.3772 61.4997 22.74 61.4997 26.9752L61.4925 47.6918Z"})))};let h;const b=({service:s,account:a,timestamp:l,status:n})=>(0,e.createElement)("tr",null,(0,e.createElement)("td",null,(0,e.createElement)(t.__experimentalHStack,{justify:"flex-start"},(0,e.createElement)(e.Fragment,null,g(s)),(0,e.createElement)(e.Fragment,null,ropApiSettings.publish_now.accounts[a]?.user))),(0,e.createElement)("td",null,(e=>(0,u.dateI18n)("j F, Y g:i A",e))(Number(l+"000"))),(0,e.createElement)("td",null,(0,m.capitalize)(n))),w=({data:t})=>(0,e.createElement)("table",null,(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",{style:{width:"50%"}},ropApiSettings.labels.publish_now.account),(0,e.createElement)("th",{style:{width:"25%"}},ropApiSettings.labels.publish_now.time),(0,e.createElement)("th",{style:{width:"25%"}},ropApiSettings.labels.publish_now.status))),(0,e.createElement)("tbody",null,t.map(((t,s)=>(0,e.createElement)(b,{key:s,service:t.service,account:t.account,timestamp:t.timestamp,status:t.status}))))),E=({history:s,isOpen:a,setOpen:l})=>a?(0,e.createElement)(t.Modal,{title:ropApiSettings.labels.publish_now.sharing_history,onRequestClose:()=>{l(!a)},size:"large",className:"revive-social__modal"},(0,e.createElement)(w,{data:s})):null,y=({status:s,history:i,isPostPublish:o,setStatus:p,setHistory:c})=>{const[u,m]=(0,r.useState)(!1),_=i.some((e=>"queued"===e.status));if((0,r.useEffect)((()=>("queued"===s||_?h=setInterval((()=>{const e=(0,l.select)(a.store).getEntityRecord("postType",(0,l.select)(n.store).getCurrentPostType(),(0,l.select)(n.store).getCurrentPostId(),{cache:Date.now()}).meta;p(e?.rop_publish_now_status),c(e?.rop_publish_now_history||[])}),5e3):clearInterval(h),()=>clearInterval(h))),[s,_]),(0,r.useEffect)((()=>{"done"!==s||_||clearInterval(h)}),[s]),"queued"===s||_)return(0,e.createElement)(t.__experimentalHStack,{justify:"flex-start",className:"revive-social__spinner"},(0,e.createElement)(t.Spinner,null),(0,e.createElement)("p",null,ropApiSettings.labels.publish_now.queued));if("done"===s&&0===i.length)return null;const d=(e=>{switch(e.reduce(((e,t)=>"error"===t.status?"failed":"success"===t.status?"success":"partially_shared"),"")){case"failed":return{title:ropApiSettings.labels.publish_now.share_failed_title,description:ropApiSettings.labels.publish_now.share_failed_desc};case"partially_shared":return{title:ropApiSettings.labels.publish_now.share_partially_shared_title,description:ropApiSettings.labels.publish_now.share_partially_shared_desc};default:return{title:ropApiSettings.labels.publish_now.shared_title,description:ropApiSettings.labels.publish_now.shared_desc}}})(i);return(0,e.createElement)(e.Fragment,null,o&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h4",null,d.title),(0,e.createElement)("p",null,d.description)),(0,e.createElement)(E,{history:i,isOpen:u,setOpen:m}),(0,e.createElement)(t.Button,{variant:"secondary",style:{width:"100%",justifyContent:"center"},onClick:()=>m(!u)},ropApiSettings.labels.publish_now.view_history))},S=window.wp.apiFetch;var f=s.n(S);const v=window.wp.notices,C=(0,p.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(o.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})}),k=(0,p.jsx)(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,p.jsx)(o.Path,{d:"m6.249 11.065.44-.44h3.186l-1.5 1.5H7.31l-1.957 1.96A.792.792 0 0 1 4 13.524V5a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v1.5L12.5 8V5.5h-7v6.315l.749-.75ZM20 19.75H7v-1.5h13v1.5Zm0-12.653-8.967 9.064L8 17l.867-2.935L17.833 5 20 7.097Z"})}),q=({id:s,platform:a,meta:l,updateMetaValue:n,isPro:i})=>{const[o,p]=(0,r.useState)(!1),[c,u]=(0,r.useState)("");return(0,e.createElement)(t.__experimentalVStack,null,(0,e.createElement)(t.__experimentalHStack,{alignment:"center",justify:"flex-start",spacing:2},(0,e.createElement)(t.CheckboxControl,{__nextHasNoMarginBottom:!0,"aria-describedby":`revive-social-checkbox__${s}`,checked:Object.keys(l.rop_publish_now_accounts||{}).includes(s),onChange:e=>(e=>{const t={...l.rop_publish_now_accounts||{}};e?t[s]=c:delete t[s],n("rop_publish_now_accounts",t)})(e),id:`revive-social-checkbox__${s}`,className:"revive-social__checkbox"}),(0,e.createElement)(t.__experimentalHStack,null,(0,e.createElement)(t.__experimentalHStack,{as:"label",justify:"flex-start",htmlFor:`revive-social-checkbox__${s}`,expanded:!1,wrap:!1},g(a?.service),(0,e.createElement)("div",null,a?.user)),(0,e.createElement)(t.Button,{variant:"tertiary",icon:o?C:k,label:o?ropApiSettings.labels.settings.save:ropApiSettings.labels.publish_now.edit_message,showTooltip:!0,disabled:!Object.keys(l.rop_publish_now_accounts||{}).includes(s),onClick:()=>p(!o)}))),o&&(0,e.createElement)(t.TextareaControl,{label:ropApiSettings.labels.publish_now.custom_share_message,placeholder:ropApiSettings.labels.publish_now.custom_share_message_placeholder,help:(0,e.createElement)("p",{dangerouslySetInnerHTML:{__html:ropApiSettings.labels.publish_now.custom_instant_share_messages_upsell}}),value:c,onChange:e=>{u(e);const t={...l.rop_publish_now_accounts||{},[s]:e};n("rop_publish_now_accounts",t)},disabled:!i}))},x=({accounts:s,isPro:a,setHistory:i})=>{const[o,p]=(0,r.useState)({rop_publish_now_accounts:{}}),[c,u]=(0,r.useState)(!1),m=(0,l.useSelect)((e=>e(n.store).getCurrentPostId()),[]),{createNotice:_}=(0,l.useDispatch)(v.store),d=(e,t)=>{p({...o,[e]:t})};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,ropApiSettings.labels.publish_now.reshare_description),(0,e.createElement)(t.__experimentalVStack,{spacing:"4",style:{marginTop:"1.5rem"}},s?.map((t=>(0,e.createElement)(q,{key:t,id:t,platform:ropApiSettings.publish_now.accounts[t],meta:o,updateMetaValue:d,isPro:a})))),(0,e.createElement)(t.__experimentalSpacer,{paddingTop:"4",paddingBottom:"1"},(0,e.createElement)(t.Button,{variant:"primary",disabled:c||0===Object.keys(o.rop_publish_now_accounts||{}).length,onClick:()=>(async(e,t)=>{u(!0);try{const s=await f()({path:`tweet-old-post/v8/share/${e}`,method:"POST",data:{...t}});return!0!==s.success?(_("error",s.message,{isDismissible:!0,type:"snackbar"}),s):(s?.history&&i(s.history),_("info",s.message,{isDismissible:!0,type:"snackbar"}),d("rop_publish_now_accounts",{}),s)}catch(e){throw _("error",e?.message,{isDismissible:!0,type:"snackbar"}),e}finally{u(!1)}})(m,o),isBusy:c,style:{width:"100%",justifyContent:"center"}},ropApiSettings.labels.publish_now.reshare_button)))},A=Number(ropApiSettings.license_type)>0,P=Object.keys(ropApiSettings.publish_now.accounts)?.length>=1,B=({screen:s,meta:a,updateMetaValue:l,postStatus:n,publishStatus:i})=>{const o="post-publish"===s,p="publish"===n,[u,m]=(0,r.useState)(i||"pending"),[_,d]=(0,r.useState)(a.rop_publish_now_history||[]);(0,r.useEffect)((()=>{m(i||"pending")}),[i]);const g=Object.keys(ropApiSettings.publish_now.accounts).filter((e=>!0===ropApiSettings.publish_now.accounts[e].active));return!P&&o||o&&!p?null:p&&o&&"pending"!==u?(0,e.createElement)(y,{status:u,history:_,setStatus:m,setHistory:d}):P?p?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(x,{accounts:g,isPro:A,setHistory:d}),_.length>0&&(0,e.createElement)(y,{status:u,history:_,isPostPublish:o,setStatus:m,setHistory:d})):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,ropApiSettings.labels.publish_now.instant_sharing_desc),(0,e.createElement)(t.ToggleControl,{label:ropApiSettings.labels.publish_now.share_immediately,className:"revive-social__toggle",checked:"yes"===a.rop_publish_now,onChange:e=>l("rop_publish_now",e?"yes":"no")}),"yes"===a.rop_publish_now&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.__experimentalVStack,{spacing:"4",style:{marginTop:"1.5rem"}},g?.map((t=>(0,e.createElement)(q,{key:t,id:t,platform:ropApiSettings.publish_now.accounts[t],meta:a,updateMetaValue:l,isPro:A})))),(0,e.createElement)(t.__experimentalSpacer,{paddingY:"4"},(0,e.createElement)(t.Button,{variant:"secondary",icon:c,style:{width:"100%",justifyContent:"center"},target:"_blank",href:ropApiSettings.dashboard},ropApiSettings.labels.publish_now.add_platform)))):(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,ropApiSettings.labels.publish_now.add_account_to_use_instant_share),(0,e.createElement)(t.__experimentalSpacer,{paddingY:"4"},(0,e.createElement)(t.Button,{variant:"secondary",icon:c,style:{width:"100%",justifyContent:"center"},target:"_blank",href:ropApiSettings.dashboard},ropApiSettings.labels.publish_now.add_platform)))},N=window.wp.compose,j=["facebook","twitter","linkedin","bluesky","tumblr","telegram","whatsapp","link"],V=()=>{const{title:s,permalink:a}=(0,l.useSelect)((e=>{const t=e(n.store).getCurrentPostAttribute;return{title:t("title"),permalink:t("link")}}),[]),{createNotice:r}=(0,l.useDispatch)(v.store),i=((e,t)=>{const s=encodeURIComponent(e),a=encodeURIComponent(t);return{facebook:`https://www.facebook.com/sharer/sharer.php?u=${a}`,twitter:`https://x.com/intent/post?text=${s}%20-%20${a}`,linkedin:`https://www.linkedin.com/shareArticle?mini=true&url=${a}&title=${s}`,tumblr:`https://www.tumblr.com/widgets/share/tool?canonicalUrl=${a}&title=${s}`,telegram:`https://t.me/share/url?url=${a}&text=${s}`,whatsapp:`https://api.whatsapp.com/send?text=${s}%20-%20${a}`,bluesky:`https://bsky.app/intent/compose?text=${s}%20-%20${a}`,link:`${s} - ${a}`}})(s,a),o=(0,N.useCopyToClipboard)(i.link,(()=>r("info",ropApiSettings.labels.publish_now.copied_to_clipboard,{isDismissible:!0,type:"snackbar"})));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,ropApiSettings.labels.publish_now.manual_sharing_desc),(0,e.createElement)(t.__experimentalHStack,{wrap:"wrap",justify:"flex-start",className:"revive-social__sharing-buttons"},j.map((s=>(0,e.createElement)(t.Button,{key:s,..."link"===s?{ref:o}:{target:"_blank",rel:"noopener noreferrer",href:i[s]}},g(s))))))},M=window.wp.blockEditor,H=["image"],O=({id:t})=>{const s=(0,l.useSelect)((e=>t?e(a.store).getMedia(t):null),[t]);return s?(0,e.createElement)("img",{src:s.source_url,alt:s.alt_text||s.title||"",style:{maxWidth:"100%",height:"auto"}}):null},$=({meta:s,updateMetaValue:a})=>{(0,r.useEffect)((()=>{Boolean(s.rop_custom_messages_group?.length)||l()}),[]);const l=()=>{const e=[...s.rop_custom_messages_group||[],{rop_custom_description:""}];a("rop_custom_messages_group",e)};return(0,e.createElement)(t.PanelBody,{title:ropApiSettings.labels.post_editor.new_variation,initialOpen:!1},(0,e.createElement)("p",{dangerouslySetInnerHTML:{__html:ropApiSettings.labels.post_editor.custom_message_info}}),s.rop_custom_messages_group?.map((({rop_custom_description:l},n)=>(0,e.createElement)(t.__experimentalSpacer,{paddingY:2},(0,e.createElement)(t.Card,{isRounded:!1},(0,e.createElement)(t.CardBody,null,(0,e.createElement)(t.TextareaControl,{label:ropApiSettings.labels.post_editor.new_variation,placeholder:ropApiSettings.labels.post_format.add_char_placeholder_custom_content,value:l,onChange:e=>((e,t)=>{const l=[...s.rop_custom_messages_group||[]];l[e]={rop_custom_description:t},a("rop_custom_messages_group",l)})(n,e)}),(0,e.createElement)(t.__experimentalVStack,null,(0,e.createElement)(O,{id:s.rop_custom_images_group?.[n]?.rop_custom_image}),(0,e.createElement)(t.__experimentalHStack,{justify:"flex-start"},(0,e.createElement)(M.MediaUploadCheck,null,(0,e.createElement)(M.MediaUpload,{onSelect:e=>((e,t)=>{const l={...s.rop_custom_images_group||{}};l[e]||(l[e]={}),l[e].rop_custom_image=t,a("rop_custom_images_group",l)})(n,e?.id),allowedTypes:H,value:s.rop_custom_images_group?.[n]?.rop_custom_image||null,render:({open:a})=>(0,e.createElement)(t.Button,{variant:"primary",onClick:a},s.rop_custom_images_group?.[n]?.rop_custom_image?ropApiSettings.labels.post_editor.variation_image_change:ropApiSettings.labels.post_editor.variation_image)})),s.rop_custom_images_group?.[n]?.rop_custom_image&&(0,e.createElement)(t.Button,{variant:"secondary",onClick:()=>(e=>{const t={...s.rop_custom_images_group||{}};delete t[e],a("rop_custom_images_group",t)})(n)},ropApiSettings.labels.post_editor.variation_remove_image))),(0,e.createElement)(t.__experimentalSpacer,null),n>0&&(0,e.createElement)(t.Button,{variant:"secondary",isDestructive:!0,style:{width:"100%",justifyContent:"center"},onClick:()=>(e=>{const t=(s.rop_custom_messages_group||[]).filter(((t,s)=>s!==e)),l=s.rop_custom_images_group||{},n={};Object.entries(l).forEach((([t,s])=>{const a=parseInt(t,10);a<e?n[a]=s:a>e&&(n[a-1]=s)})),a({rop_custom_messages_group:t,rop_custom_images_group:n})})(n)},ropApiSettings.labels.post_editor.remove_variation)))))),(0,e.createElement)(t.__experimentalSpacer,{paddingY:4},(0,e.createElement)(t.Button,{variant:"secondary",onClick:l,icon:c,style:{width:"100%",justifyContent:"center"}},ropApiSettings.labels.post_editor.add_variation)))},I=()=>(0,e.createElement)("div",{style:{padding:"16px"}},(0,e.createElement)("h3",{style:{fontSize:"14px",margin:"0 0 8px",fontWeight:600,display:"flex",alignItems:"center"}},(0,e.createElement)("span",{role:"img","aria-label":"unlock",style:{marginRight:"6px"}},"ðŸ”“"),ropApiSettings.labels.post_editor.upsell.title),(0,e.createElement)("p",{style:{marginBottom:"10px",color:"#555"}},ropApiSettings.labels.post_editor.upsell.subtitle),(0,e.createElement)("ul",{style:{margin:"0 0 12px 16px",padding:0,listStyle:"disc",color:"#444"}},(0,e.createElement)("li",null,ropApiSettings.labels.post_editor.upsell.line_one),(0,e.createElement)("li",null,ropApiSettings.labels.post_editor.upsell.line_two),(0,e.createElement)("li",null,ropApiSettings.labels.post_editor.upsell.line_three)),(0,e.createElement)(t.Button,{variant:"primary",href:d({link:ropApiSettings.upsell_link,source:"post-editor",medium:"sidebar",campaign:"variations"}),target:"_blank"},ropApiSettings.labels.post_editor.upsell.cta)),T=(0,e.createElement)(t.Icon,{icon:(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.3 122.3"},(0,e.createElement)("path",{className:"a",d:"M61.15,0A61.15,61.15,0,1,0,122.3,61.15,61.22,61.22,0,0,0,61.15,0Zm40.54,60.11L86.57,75.62,47.93,32.39l-33.07,27H12a49.19,49.19,0,0,1,98.35,1.24ZM109.35,71a49.2,49.2,0,0,1-96.63-1.2h5.84L46.8,46.74,86.24,90.86l19.57-20.07Z"}))}),F=Number(ropApiSettings.license_type)>0;(Boolean(ropApiSettings.publish_now.instant_share_enabled)||F&&Boolean(ropApiSettings.custom_messages))&&(0,i.registerPlugin)("revive-social",{render:()=>{const s=(0,l.useSelect)((e=>e(n.store).getCurrentPostType()),[]),i=(0,l.useSelect)((e=>e(n.store).getCurrentPostAttribute("status")),[]),[o,p]=(0,a.useEntityProp)("postType",s,"meta"),c=(e,t)=>{p("object"==typeof e&&null!==e?{...o,...e}:{...o,[e]:t})};return(0,r.useEffect)((()=>{"initial"===o.rop_publish_now&&"publish"!==i&&ropApiSettings.publish_now.instant_share_by_default&&c("rop_publish_now","yes")}),[]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.PluginSidebarMoreMenuItem,{target:"rop-sidebar",icon:T},ropApiSettings.labels.general.plugin_name),(0,e.createElement)(n.PluginSidebar,{name:"rop-sidebar",icon:T,title:ropApiSettings.labels.general.plugin_name,className:"revive-social-sidebar"},Boolean(ropApiSettings.publish_now.instant_share_enabled)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.PanelBody,{title:ropApiSettings.labels.publish_now.instant_sharing},(0,e.createElement)(B,{screen:"pre-publish",meta:o,updateMetaValue:c,postStatus:i,publishStatus:o.rop_publish_now_status})),"publish"===i&&(0,e.createElement)(t.PanelBody,{title:ropApiSettings.labels.publish_now.manual_sharing},(0,e.createElement)(V,null))),F&&Boolean(ropApiSettings.custom_messages)&&(0,e.createElement)($,{meta:o,updateMetaValue:c}),!F&&(0,e.createElement)(I,null)),Boolean(ropApiSettings.publish_now.instant_share_enabled)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.PluginPrePublishPanel,{title:ropApiSettings.labels.publish_now.instant_sharing,isInitialOpen:!0,icon:T},(0,e.createElement)(B,{screen:"pre-publish",meta:o,updateMetaValue:c,postStatus:i,publishStatus:o.rop_publish_now_status})),"publish"===i&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.PluginPostPublishPanel,{icon:T,isInitialOpen:!0},(0,e.createElement)(B,{screen:"post-publish",meta:o,updateMetaValue:c,postStatus:i,publishStatus:o.rop_publish_now_status})),(0,e.createElement)(n.PluginPostPublishPanel,{title:ropApiSettings.labels.publish_now.manual_sharing,icon:T,isInitialOpen:!0},(0,e.createElement)(V,null)))))}})})()})();